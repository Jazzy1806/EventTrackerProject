<h1>{{title}} <span [ngClass]="colorCode()">{{numberOfProjects()}}</span></h1>

<div *ngIf="selected && !editProject;else full_list" id="projectDetails">
  <h2>{{selected.name}}</h2>
  <ul>
    <li>Description: {{selected.description}}</li>
    <li>ID: {{selected.id}}</li>
    <li>Status: {{selected.status}}</li>
    <li>Date Created: {{selected.createdOn}}</li>
  </ul>
  <button (click)="setEditProject()" class="btn btn-primary" style="margin:20px">Edit</button>
  <button (click)="displayTable()" class="btn btn-primary">Full List</button>
</div>

<div *ngIf="editProject">
  <form (ngSubmit)="updateProject(editProject)">
    <label>Project: </label><input type="text" name="name" [(ngModel)]="editProject.name"/>
    <label>Description: </label><input type="text" name="description" [(ngModel)]="editProject.description"/>
    <label>Category: </label><select name="category" [(ngModel)]="editProject.category">
      <option value="">Choose Category</option>
      <option *ngFor="let c of categories" [ngValue]="c">{{c}}</option>
    </select>
    <label>Status: </label><select name="status"  [(ngModel)]="editProject.status">
    <option value="">Choose Status</option>
    <option *ngFor="let s of statuses" [ngValue]="s">{{s}}</option>
  </select>
    <button type="submit" class="btn btn-success" style="margin:20px">Save</button>
    <button type="button" class="btn btn-primary" (click)="editProject=null">Cancel</button>
  </form>
</div>

<ng-template #full_list>
<div *ngIf="!editProject">
  <form>
    <label>Project: </label><input type="text" name="name" [(ngModel)]="newProject.name"/>
    <label>Description: </label><input type="text" name="description" [(ngModel)]="newProject.description"/>
    <label>Category: </label><select name="category" [(ngModel)]="newProject.category">
      <option *ngFor="let c of categories" [ngValue]="c">{{c}}</option>
    </select>
    <label>Status: </label><select name="status"  [(ngModel)]="newProject.status">
    <option *ngFor="let s of statuses" [ngValue]="s">{{s}}</option>
  </select>
    <button class="btn btn-primary" (click)="addProject()" style="margin:20px">Add Project</button>
  </form>
<div class="form-check">
  <label class="form-check-label">Show All Projects</label><input type="checkbox" class="form-check-input" name="showComplete" [(ngModel)]="showComplete"/>
</div>
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Project</th>
        <th>Description</th>
        <th>Status</th>
    </tr>
  </thead>
  <tbody *ngFor = "let project of projects | status: showComplete" [ngClass]="project.status? 'completedProject': ''">
    <tr>
      <td (click)="displayProject(project)">{{project.name}}</td>
      <td>{{project.description}}</td>
      <select name="status"  [(ngModel)]="project.status" (change)="updateProject(project); statusUpdate=true">
         <option *ngFor="let s of statuses" [ngValue]="s">{{s}}</option>
      </select>
      <td><button (click)="deleteProject(project.id)" class="btn btn-danger">Delete</button></td>
    </tr>
  </tbody>
</table>
</div>
</ng-template>
